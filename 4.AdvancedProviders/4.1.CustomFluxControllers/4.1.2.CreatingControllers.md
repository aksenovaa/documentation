4.1.2 Создание пользовательских Flux контроллеров
=================================================

![FluidTYPO3 File contexts, Controllers](../Images/FileContext/Controllers.svgz)

Контроллер Flux почти в точности идентичен стандартному ActionController в его наиболее общей форме:

```php
<?php
namespace FluidTYPO3\Fluidcontent\Controller;

use FluidTYPO3\Flux\Controller\AbstractFluxController;

/**
 * My custom ContentController to render my package's Content templates.
 *
 * @package Myextension
 * @subpackage Controller
 */
class ContentController extends AbstractFluxController {

}
```

Однажды созданный, класс автоматически используется функционалом Fluid Powered TYPO3 при формирование типа `Содержимое`
(другими словами, элементами `fluidcontent` из вашего собстенного набора). Изначально ваш контроллер не будет совершать никаких
 действий, всё, что он делает (начиная с пустого тела класса) это инициируется и использует наследуемые из родительского класса
  функции.

## Специальные методы инициализации

В пользовательские контроллеры Flux добавлено несколько дополнительных методов инициализации для обеспечения дополнительного
контроля и ясности при создании специальных контекстов Flux, необходимых при действиях рендеринга контроллера. В порядке
выполнения это следующие действия:

1. initializeProvider, которое в базовом классе просто необходимую для контроллера таблицу и название связанного поля.
2. initializeSettings, которое в базовом классе заполняет `$this->settings` (TypoScript и Flux из переменных), `$this->setup` (
пути режимов вывода/view из TypoScript для расширения) и `$this->data` (только Flux из переменных, исключая значения TS).
3. initializeOverriddenSettings, заботится о настройке `$this->settings` при переназначении, если это нужно.
4. initializeViewObject, новый аналог `initializeView`, предаваемый Flux, помимо прочего, здесь можно назначать путь к шаблону
и название файла в поставщике/Provider, если контроллер определяет их явное использование.
5. initializeViewVariables, которое можно использовать для назначения переменных в пользовательском режиме вывода/view —
переменные, передаваемые в каждое действие (и которые позде могут быть переназначены изнутри каждого из действий контроллера).

Все методы вызываются из метода `initializeView` класса контроллера — **вы никогда не должны переназначать этот класс без, либо
 вызова всех соответствующих методово инициализации, ЛИБО помня о необходимости вызова `parent::initializeView($view)`**.
Переназначение этих методов (с оглядкой на оригинальный метод, если нужно, вызывая `parent::$methodName()` в начале
переназначающего метода для обеспечения правильности создаваемого контекста) могжет позволить детально контролировать многие
аспекты своих режимов вывода/View и подготавляемых переменных.
