1.2 Использование Flux
==============

![FluidTYPO3 File contexts, Flux](../Images/FileContext/Flux.svgz)

Flux это (помимо прочего) способ определения полей форм настроек (то есть полей flexform) внутри самого шаблона Fluid. Fluid Powered TYPO3 использует это повсеместно в шаблонировании — в шаблонах элементов содержимого можно, например, добавить поля, заполняя которые, редактор может иначе вывести шаблон элемента. Это упрощает добавление необходимых параметров для редакторов - переключателей вариантов вывода шаблона, выбора целевых страниц для ссылок и многого другого.

Если нужны сложные формы и поля, во Flux имеется полнофункционалный PHP контекст и для этого, позволяющий создавать настраиваемые и повторно используемые формы с минимальными усилиями.

### Формы для записей

Используя Flux для формирования полей форм, используемых для настройки свойств записей, мы получаем множество преимуществ:

1. Как поле, так и тип объекта (например, sheets - вкладки) представлены и проектором/ViewHelper, и классом PHP, что позволяет использовать или каждый из них в отдельности, или оба вместе. Результат тот же.
2. Ошибки в структуре поясняются понятными сообщениями об ошибках в обязательных атрибутах, неверных значениях, неправильных типах полей и так далее.
3. Формы и поля могут использоваться совместно в нескольких шаблонах (как и во flexforms), но при этом остаётся возможность дополнения или изменения структуры формы в каждом из шаблонов. Каждый компонент может использоваться повторно и быть настроен для получения нужного результата.

Основное преимущество Flux в этом контексте — предоставление (довольно сложного) набора базовых функций, полезных для почти всех типов расширений, особенно тех, которые используют поля форм для тонкой настройки редакторами элементов содержимого.

### Поставщики/Provider для записей

Ещё один фокус Flux — назначение специального типа класса `Provider`. `Provider`, это, в самых общих словах, _класс, имеющий методы для получения одной записи и её обработки, либо возвращающий переменные, в зависимости от свойств записи_. Например, `Provider` имеет метод `getTemplatePathAndFilename`, принимающий `$row`, а расширения, вроде `fluidcontent` используют его для возврашения различных названий файлов, в зависимости от значения поля "Fluid Content Type". Излише говорить, что это лишь малая часть того, что `Provider` может делать, полное описание дано в соответствующей главе этой документации.

Далее: [Глава 1.3: использование файла шаблона](1.3.TemplateFileUsage.md).
