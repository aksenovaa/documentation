1.6 Портативный код
===================

Fluid Powered TYPO3 рекомендует переносимый код посредством создания расширений для шаблонов. Чтобы сделать код понятным рекомендуем придерживаться нескольких простых рекомендаций:

### Правильные и конкретные зависимости

Настройте зависимость своего расширения от определённых версий VHS и Flux (от одного или обоих из расширений `fluidcontent`, `fluidpages` и так далее), при этом будут выводиться предупреждения об обновлении или установки соответствующих расширений. В наших графиках выпуска версий обозначено, что **необходимо ограничить зависимость до следующей основной версии**, так как **основная версия это так, где мы представляем изменения, которые могут повлечь ошибки выполнения, что требует миграции**. Конкретный пример: если расширение поставщик зависит от проекторов/ViewHelpers версии VHS 1.8.5, то **максимально допустимая в зависимостях версия VHS должна быть 1.9.99**, так как, **если модуль управления расширениями однажды оповестит о выходе VHS версии 2.0.0, то появится предупреждение, что расширение проводник может неверно работать при обновлении на эту версию**.

### Без жёсткого кодирования!

Избегайте жёсткой установки значений — ни значений page UID, ни языковых меток, ни специфичных для настроек значений, вроде group UID, storage PID и page UID не должны быть жёстко установлены в коде, используйте для них файл с константами TypoScript.

### Хранение шаблонов, ресурсов, шрифтов, настроек

Помещайте все файлы, как шаблоны, так и ресурсы (CSS, JS, шрифты, значки, файлы CSS технологий и тому подобное) в расширение поставщик, так, чтобы можно было управлять их версиями из одного места.

### Иногда нужна совместимость

Даже если расширение использует пространство имён классов PHP и предназначено для работы только в версии TYPO3 6.0 и выше, хорошей практикой служит добавление файла `Migrations/Code/ClassAliasMap.php` хотя бы для классов контроллера. Многие сторонние расширения не имеют области именования, и это нужно учитывать — дать им возможность определить класс контроллера в старом стиле именования классов. Проекторы/ViewHelpers, службы/services и тому подобное менее важны для разметки псевдонимов.

### Избегайте осуждаемых/deprecated кусков

Избегайте осуждаемых проекторов/ViewHelpers, даже если они пока работают на вашем сайте. TYPO3 имеет очень долгий период устаревания для функционала, но в VHS этот период гораздо короче. Чтобы узнать, что в шаблонах используются устаревшие проекторы/ViewHelpers из ядра TYPO3, VHS или Fluid (или любых других расширений!), можно воспользовать расширением `builder` для сканирования своих шаблонов Fluid на предмет устаревшего кода.

Соблюдая эти простые правила вы обеспечите своему расширению поставщику беспроблемное и по возможности долгое существование, возможность работы на сторонних сайтах, все ресурсы будут актуальными и требуемые для его работы расширения будут установлены и иметь нужную версию.

Далее: [Глава 1.8: Разработка сопутствующих расширений](1.8.DevelopmentCompanionExtensions.md).
