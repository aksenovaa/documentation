3.1.2 Разъяснение области расширения
====================================

![FluidTYPO3 File contexts, full](../Images/FileContext/Full.svgz)

Изолируя каждый пакет шаблонов и настроек в расширение поставщик мы чётко разделяем их и позволяем работать совместно на сайте.
 Как пример, нет причин запрета установки как Twitter Bootstrap, так и набора шаблонов на базе Foundation, находящихся в разных
  расширениях поставщиках, а потом просто выбирать, какой шаблон использовать на каждой конкретной странице. Без каких-либо
  конфликтов (разумеется, расширения поставщики должны следовать нашим подсказкам по лучшим решениям, описанным в этом
  руководстве).

Помимо прочего, преимущества использования расширений для хранения, это:

### Изоляция контекстов

Безусловно, самым большим преимуществом размещения шаблонов в расширениях является *правила размещеня файлов*. Не вдаваясь в
подробности, скажем, что это просто означает, что проекторы/ViewHelpers вроде `f:translate` будут знать, где искать нужный LLL
файл, без нужды указывать каждый раз `LLL:EXT:myextensionkey/Resources/Private/Language/locallang.xlf`, что `f:uri.resource`
знает, что искать нужно в общей папке для ресурсов *своего* расширения — и всё в том же духе. Extbase и Fluid руководствуются строгими правилами, которые также можно использовать на пользу дела. Вместо того, чтобы искать в настройках, где расположены файлы шаблона и ресурсов, всё, что нужно
знать — ключ расширения, к которому они относятся.

### Общие настройки

Так как в области расширений Extbase принято указывать настройки TypoScript в определенном месте:
`plugin.tx_yourextensionkey.settings`, это передаётся к контроллерам и режимам вывода расширения без необходимости указания
вручную переменных view, передачи их в `arguments` для `f:render` и так далее.

Более того, специально зарезервированное название `settings` можно использовать как префикс для всех названий полей форм, создаваемых с использованием Flux, при этом все значения, которые редакторы вводят в формы объединяются (и переназначают) с одноимёнными настройками в TypoScript. Возможно
даже детально контролировать их поведения, используя свой контроллер для функционала Flux.

### Правила для путей файлов

Extbase оглашает предельно чёткие правила для положения (по умолчанию) файлов шаблонов для расширения. Хотя сразу почуствовать
выгоду от этого не всегда получиться (пути сравнительно длинные, по стравнению со старыми путями, например,
`fileadmin/templates/`), но она станет очевидно при командной работе при создании шаблонов для сайтов. Принятие правил —
огромное преимущество команды, и Extbase предлагает свои правила, вместо изобретения собственных.

### Функции на основе контроллера

Все ключевые функции Fluid Powered TYPO3 зависят от контроллеров Extbase. Мы выбрали путь создания и использования
контроллеров, что также позволяет заменить наши контроллеры на созданные вами классы. Однако контроллеры Extbase тесно связаны
с контекстом расширения, то есть, появявится куча сложностей при попытке создать класс контроллера Extbase вне пространства
расширения и сделать его доступным.

Но соглашаясь на правила использования расширения в качестве хранилища, правила для контроллера наследуются автоматически. То
есть Flux может определять присутствие заменяющего контроллера просто при попытке загрузки класса с оговоренным названием,
который и будет присутствовать внутри области самого расширения.

### Наилучшие отправные точки

Когда отправной точкой служит расширение, с файлами LLL, папками для шаблонов, настройками TypoScript и всем остальным,
становится легче добавлять более сложные функции. Например, настоящие дополнения Extbase, находящиеся в том же дополнении, что
и шаблоны страниц, и элементы содержимого для сайта.

В итоге: Extbase диктует использование области расширений для получения всех преимуществ стратегии "правила прежде настроек".
