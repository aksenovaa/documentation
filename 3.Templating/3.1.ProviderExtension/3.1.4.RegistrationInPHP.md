3.1.4 Регистрация в PHP
=======================

Для того, чтобы сообщить Flux, что добавлено расширение поставщик, и оно содержит такие-то типа файлов шаблонов (например,
шаблоны страниц и элементов содержимого) необходим небольшой кусочек кода PHP:

```php
// ext_localconf.php
\FluidTYPO3\Flux\Core::registerProviderExtensionKey('myextensionkey', 'Content');
\FluidTYPO3\Flux\Core::registerProviderExtensionKey('myextensionkey', 'Page');
```

> Версии TYPO3 старее 6.2 также требуют, чтобы эти же точно строки были добавлены в `ext_tables.php`. Это зависит от способа TYPO3 кеширования и загрузки кешированных версий файлов типа `tables` и `localconf`. В TYPO3 6.2 и выще, необходимо добавить это лишь в `ext_localconf.php` или `ext_tables.php` — какой из них выбрать, не имеет значения, но для согласованности мы рекомендуем всегда использовать `ext_localconf.php`.

Это указывает Flux, чтобы а) имеется новое расширение поставщик и б) в нём имеются шаблоны для контроллера типа `Content` и в)
шаблоны для контроллера типа `Page`. Важно понимать, что сам Flux не занимается формированием этих шаблонов (Flux, тем не
менее, читает хранящуюся в них настройку!). Роль Flux в этом случае — просто обеспечение общей API, отслеживающей и соотносящей содержимое расширений поставщиков с типами шаблонов.

## Если расширение поставщик содержит классы контроллеров

Если расширение поставщик содержит классы контроллеры любого из регистируемых типов контроллеров (`ContentController`, `PageController` и т. п.), необходимо знать ещё следующее:

1. Flux определит эти контроллеры, проверив существование определённого названия класса. Это значит, что вам не нужно никоим
образом настраивать доступ к контроллеру, об этом позаботится Flux.
2. Если расширение поставщик использует области именования/namespaces PHP (что должно быть верным), то параметр
`myextensionkey` в примере регистрации выше долже, вместо ключа расширения в нижнем регистре содержать комбинацию
поставщика/vendor и названия расширения, вроде,a `MyVendorName.Myextensionkey`. Этот формат заставит Flux искать название класса в формате области именования, во всех других форматах указания Flux ищет название класса в старом стиле с приставкой `Tx_`.
3. Для работы некоторых возможностей, а также для возможности отказа, названия классов контроллеров должны иметь псевдонимы,
настроенные в файле `EXT:myextensionkey/Migrations/Code/ClassAliasMap.php` (для справки посмотрите любое расширение из ядра TYPO3). Здесь намеренно не указывается, какие возможности зависят от этих псевдонимов, так как это меняется с каждой версией ядра TYPO3. Возьмите за правило: чем новее версия ядра TYPO3, тем меньше вероятность того, что понадобятся псевдонимы.

> Помните: Flux чрезвычайно гибок, и класс `FluidTYPO3\Flux\Core` содержит широкий спектр методов регистрации, не описанных в этой главе, но которые будут показаны, если вы, например, для создания расширения используете IDE. Описанные здесь методы — простейшие, направленные чисто на создание
шаблонов, они чаще всего используются. *Каждый из специфичных методов регистрации имеет специфичные варианты использования, ни
один из которых не используется в контексте шаблонов*.
