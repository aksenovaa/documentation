3.2.2 Создание шаблонов страниц
===============================

Шаблон страниц состоит из двух частей: файлов макета/layout и шаблона/template. _Макеты/Layouts_ создают HTML 'каркас' страницы
 (часть между тегами ``body``) и определяют динамические части при помощи 'sections'. Представление во внутреннем интерфейсе
 этих разделов/sections и все дополнительные поля определяются в _шаблонах/templates_. Чтобы лучше понять, о чём идёт речь,
 посмотрите на пример:

Файл макета/Layout ``typo3conf/ext/myextension/Resources/Private/Layouts/Foo.html``

```xml
<f:layout name="Foo" />

<div id="page" class="{settings.pageClass}">
    <div id="sidebar">
        <f:render section="Sidebar" />
    </div>
    <div id="content">
        <f:render section="Content" />
    </div>
</div>
```

Файл шаблона/Template ``typo3conf/ext/myextension/Resources/Private/Templates/Page/Foo.html``

```xml
{namespace flux=FluidTYPO3\Flux\ViewHelpers}
{namespace v=FluidTYPO3\Vhs\ViewHelpers}

<div xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://typo3.org/ns/fluid/ViewHelpers"
      xmlns:flux="http://typo3.org/ns/flux/ViewHelpers"
      xmlns:v="http://typo3.org/ns/vhs/ViewHelpers">

<f:layout name="Foo" />

<f:section name="Configuration">

    <flux:form id="foo">

        <!-- Input field for Fluid variable 'pageClass' -->
        <flux:field.input name="settings.pageClass" default="some-css-class" />

        <!-- Backend layout grid (TYPO3 6.x and greater only) -->
        <flux:grid>
            <flux:grid.row>
                <flux:grid.column colPos="1" name="Sidebar" style="width: 25%" />
                <flux:grid.column colPos="0" name="Content" style="width: 75%" />
            </flux:grid.row>
        </flux:grid>

    </flux:form>

</f:section>

<f:section name="Content">
    <!-- Render colPos=0 in this section -->
    <v:content.render column="0" />
</f:section>

<f:section name="Sidebar">
    <!-- Render colPos=1 in this section -->
    <v:content.render column="1" />
</f:section>

</div>
```

### Разъяснение

Мы разработали шаблон/template с названием _Foo_ для страницы. Для 'связки' шаблона/template и макета/layout мы выбрали
одинаковые названия ``Foo.html`` и в обоих объявлено ``<f:layout name="Foo" />``.

> Единственная цель контейнеров div — [подключить возможность автодополнения кода в любимой IDE](http://buzz.typo3.org/teams/extbase/article/howto-autocompletion-for-fluid-in-phpstorm) и они не выводятся.

Макет/layout состоит из простой структуры HTML с двумя областями для содержимого и внешнего контейнера div с классом CSS,
задаваемым в переменной Fluid ``{settings.pageClass}``. У переменной есть приставка ``settings.``, которая не обязательна по правилам, но очень полезна, для чего — станет ясно далее.

> По правилу, макеты/layouts должны определять ``<f:section name="Main" />``, то есть раздел, который фактически выводится на
страницы сайта.

Шаблон/template определяет представление этого макета во внутреннем интерфейсе посредством формы настроек/flexform и внутреннего макета/backend layout grid (доступно в TYPO3 6.x и выше). Формы настроек/flexform определяются при помощи проекторов/viewhelpers ``flux``, которые сильно упрощают создание
 этой части.

> Необходимый минимум для файла макета страницы — определение раздела/section с названием _Configuration_, содержащего форму
настроек с указанием по крайней мере _id_, что позволит выбирать этот макет во внутреннем интерфейсе.

В нашем примере мы добавили полее для вода класса CSS, который затем станет доступен в виде переменной Fluid с тем же названием:

```xml
<flux:form id="foo">

    <!-- Input field for Fluid variable 'pageClass' -->
    <flux:field.input name="settings.pageClass" default="some-css-class" />

    [...]

</flux:form>
```

и сетку/grid, которая будет использована в качестве макета во внутреннем интерфейсе:

```xml
<flux:form id="foo">

    [...]

    <!-- Backend layout grid (TYPO3 6.x and greater only) -->
    <flux:grid>
        <flux:grid.row>
            <flux:grid.column colPos="1" name="Sidebar" style="width: 25%" />
            <flux:grid.column colPos="0" name="Content" style="width: 75%" />
        </flux:grid.row>
    </flux:grid>

</flux:form>
```

Разделы/sections _Content_ и _Sidebar_ используют проектор/viewhelper ``vhs`` для вывода содержимого этих столбцов.

> Все доступные проекторы/viewhelpers с аргументами можно найти в справке на странице [fluidtypo3.org] (http://fluidtypo3.org/viewhelpers.html)

После очистки кешей шаблон страницы должен быть доступен для выбора при редактировании свойств страницы. ``fluidpages``
включает несколько прекрасных возможностей наследования, позволяющих выбрать шаблон не только для текущей страницы, но и для
дочерних, а цепь наследования может быть прервана на любом уровне.
