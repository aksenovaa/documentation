3.2.6 Языковые файлы
====================

![FluidTYPO3 File contexts, Languages](../Images/FileContext/Languages.svgz)


В этом примере мы будем переводить следующий элемент форм Flux:
(Обратите внимание, что это раздел/section Configuration для шаблона страницы. Шаблоны содержимого и дополнения требуют
дополнительного тега ``flux:form.content`` во ``flux:grid.column``).

```xml
<f:section name="Configuration">
    <flux:form id="defaultpage" >
        <flux:form.sheet name="settings.basics">
            <flux:form.field.checkbox name="settings.includenavi" />
            <flux:grid>
                <flux:grid.row>
                    <flux:grid.column colPos="0" name="content"/>
                </flux:grid.row>
            </flux:grid>
        </flux:form.sheet>
    </flux:form>
</f:section>
```

Здесь нам нужно добавить метки и/или описания для

- самой формы/form;
- вкладки/sheet под названием "basic";
- флажка/checkbox под названием "includenavi";
- столбца сетки grid.colum под названием "content";

Для этого мы поместим следующий код в файл ``locallang.xlf`` в теге ``body`` для каждого элемента:
```xml
<trans-unit id="ID.and.path.of.the.element">
      <source>Label or description to be shown</source>
</trans-unit>
```
В основе всегда лежит цепочка именования ``flux.formID.type.name-of-the-element``

В нашем примере мы добавляем следующее в xlf файл по умолчанию (``locallang.xlf``):

```xml
<trans-unit id="flux.defaultpage">
<source>Default Pagelayout</source>
</trans-unit>
<trans-unit id="flux.defaultpage.sheets.basics">
<source>Basic Configuration</source>
</trans-unit>
<trans-unit id="flux.defaultpage.fields.includenavi">
<source>Include navigation</source>
</trans-unit>
<trans-unit id="flux.defaultpage.columns.content">
<source>Content-Area</source>
</trans-unit>
```

Как следует из ``typo3conf/ext/flux/Classes/Form/AbstractFormComponent.php`` --> ``public function getLabel()``, доступны
следующие типы:

- sheets (flux.sheets.id)
- sections
- grids
- columns
- objects
- areas
- containers
- fields

### Весь файл теперь выглядит так: ###

```xml
<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<xliff version="1.0">
    <file source-language="en" datatype="plaintext" original="messages"
          date="2012-10-17T17:55:17Z" product-name="**YOUREXT**">
        <header/>
        <body>
            <trans-unit id="flux.defaultpage">
				<source>Default Pagelayout</source>
			</trans-unit>
			<trans-unit id="flux.defaultpage.sheets.basics">
				<source>Basic Configuration</source>
			</trans-unit>
			<trans-unit id="flux.defaultpage.fields.includenavi">
				<source>Include navigation</source>
			</trans-unit>
			<trans-unit id="flux.defaultpage.columns.content">
				<source>Content-Area</source>
			</trans-unit>
        </body>
    </file>
</xliff>
```

## Работа с другими (дополнительными) языками ##

Чтобы добавить перевод для другого языка, нам нужно создать ``locallang.xlf`` для каждого из языков и именовать их таким образом:
``iso.locallang.xlf`` (например, ``ru.locallang.xlf``). Этот файл также содержит следующую структуру:

```xml
<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<xliff version="1.0">
    <file source-language="en" datatype="plaintext" original="messages"
          date="2012-10-17T17:55:17Z" product-name="**YOUREXT**">
        <header/>
        <body>
        </body>
    </file>
</xliff>
```

Чтобы сказать TYPO3 для какого языка предназначен файл, ндостаточно лишь названия файла. Нужно дополнить тег ``<file>`` в
``iso.locallang.xlf`` целевым языком, как здесь:

```xml
<file source-language="en" datatype="plaintext" original="messages"
date="2012-10-17T17:55:17Z" product-name="ext-name" target-language="ru">
```

Видно, что мы добавили целевой язык "ru", указав **target-language="de"**

Далее необходимо добавить перевод, как и в языковом файле по умолчанию, но с одной разницей — вместо:
```xml
<source>my translation</source>
```

пишем

```xml
<target>my translation</target>
```

И русский файл выглядит теперь так (``ru.locallang.xlf``):

```xml
<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<xliff version="1.0">
	<file source-language="en" datatype="plaintext" original="messages"
	      date="2012-10-17T17:55:17Z" product-name="**YOUREXT**" target-language="ru">
		<header/>
		<body>
			<trans-unit id="flux.defaultpage">
				<target>Стандартный макет страницы</target>
			</trans-unit>
			<trans-unit id="flux.defaultpage.sheets.basics">
				<target>Основная настройка</target>
			</trans-unit>
			<trans-unit id="flux.defaultpage.fields.includenavi">
				<target>Включить навигацию</target>
			</trans-unit>
			<trans-unit id="flux.defaultpage.columns.content">
				<target>Содержимое</target>
			</trans-unit>
		</body>
	</file>
</xliff>
```
