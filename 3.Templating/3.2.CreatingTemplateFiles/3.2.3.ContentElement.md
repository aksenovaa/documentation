3.2.3 Создание элементов содержимого
====================================

Шаблоны элементов содержимого создаются подобно шаблонам страниц, и также состоят из файлов макета/layout и шаблона/template. Обычно макет/layout просто выводит основной раздел шаблона и используется в нескольких элементах содержимого:

```xml
<f:layout name="Content" />

<f:render section="Main" />
```

Весь фокус в файле шаблона/template элемента содержимого, структура которого выглядит примерно так:

```xml
{namespace flux=FluidTYPO3\Flux\ViewHelpers}
{namespace v=FluidTYPO3\Vhs\ViewHelpers}

<div xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://typo3.org/ns/fluid/ViewHelpers"
      xmlns:flux="http://typo3.org/ns/flux/ViewHelpers"
      xmlns:v="http://typo3.org/ns/vhs/ViewHelpers">

<f:layout name="Content" />

<f:section name="Configuration" />

<f:section name="Preview" />

<f:section name="Main" />

</div>
```

Как видите, мы связали шаблон/template с приведённым выше макетом/layout посредством ``<f:layout name="Content" />``, добавили
раздел/section ``Configuration``, в котором будет наша форма настроек/flexform, раздел/section ``Preview``, который выводится во внутреннем интерфейсе, и раздел/section ``Main``, как видно из макета/layout, в нём содержится всё выводимое на сайте содержимое.

Теперь давайте создадим типовой элемент: блок анонса/teaserbox, включающий изображение, заголовок, немного текста и необязательную ссылку, всё это в файле ``typo3conf/ext/myextensionkey/Resources/Private/Templates/Content/Teaser.html``:

```xml
{namespace flux=FluidTYPO3\Flux\ViewHelpers}
{namespace v=FluidTYPO3\Vhs\ViewHelpers}

<div xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://typo3.org/ns/fluid/ViewHelpers"
      xmlns:flux="http://fedext.net/ns/flux/ViewHelpers"
      xmlns:v="http://fedext.net/ns/vhs/ViewHelpers">

<f:layout name="Content"/>

<f:section name="Configuration">
    <flux:form id="teaser">
        <flux:field.file name="image" allowed="jpg" uploadFolder="uploads/tx_quickstart" minItems="1" maxItems="1" size="1" />
        <flux:field.input name="headline" />
        <flux:field.text name="teasertext" rows="5" cols="30" required="TRUE" />
        <flux:field.input name="link">
            <flux:wizard.link activeTab="page"/>
        </flux:flexform.field.input>
    </flux:form>
</f:section>

<f:section name="Preview">
	<table width="100%">
	    <tr>
	        <td width="50%"><v:media.image src="uploads/tx_quickstart/{image}" alt="{headline}" width="100" /></td>
	        <td width="50%">
	            <f:format.crop maxCharacters="50">{teasertext}</f:format.crop>
	            <f:if condition="{link}">
	                <strong>Link:</strong> {link}
	            </f:if>
	        </td>
	    </tr>
	</table>
</f:section>

<f:section name="Main">
	<div class="quickstart-teaser">
	    <article>
	    <h1>{headline}</h1>
	    <div class="image-wrapper">
	        <v:media.image src="uploads/tx_quickstart/{image}" alt="{headline}" width="200" />
	    </div>
	    <div class="text-wrapper">
	        <f:format.nl2br>{teasertext}</f:format.nl2br>
	        <f:if condition="{link}">
	            <f:link.page pageUid="{link}" title="{headline}" class="readmore">read more</f:link.page>
	        </f:if>
	    </div>
	    </article>
	</div>
</f:section>

</div>
```

## Посмотрим на три раздела:

``Configuration`` содержит форму настроек/flexform, определяющую поля элемента содрежимого, которые входят в проектор/viewhelper ``<flux:form />``. ``id`` — обязательный для него аргумент, который также используется для формирования ключа перевода для метки элемента (в данном случае flux.teaser)
 в _мастере создания нового элемента_ TYPO3. По умолчанию создаётся новая вкладка под названием _FCE_, но это можно переназначить при помощи аргумента проектора/viewhelper  ``wizardTab``.

Ничего нового в полях формы настройки/flexform в этом примере нет, и чтобы не дублировать информацию, взгляните на справочник [fluidtypo3.org](http://fluidtypo3.org/viewhelpers/flux.html), где можно найти всю необходимую информацию о функционале и аргументах. Нужно сказать о мастере
ссылок, который реализован здесь как потомок соотвествующего поля ввода.

> Значения полей доступны, как одноимённые переменные в разделах/sections ``Preview`` и ``Main``.

``Preview`` содержит фактически старомодный макет таблицы, формируемой во внутреннем интерфейсе, который должен быть знаком,
если до этого работали с Templavoilà. Обратите внимание на использование ``<v:media.image />`` для обхода проблемы с
отображением изображений во внутреннем интерфейсе ввиду использования относительных путей.

``Main`` содержит всё то, что будет выведено на страницы сайта при помощи уже частично знакомых проекторов/viewhelpers fluid.

После очистки кеша теперь, в _мастере создания содержимого_, на новой вкладке _FCE_ должен появиться новый элемент содержимого.
